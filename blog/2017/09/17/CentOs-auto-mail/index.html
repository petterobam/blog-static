<!DOCTYPE html>

<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="zh">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>CentOS è‡ªåŠ¨å‘é‚®ä»¶ | æ¬§é˜³Boy_Petter&#39;s Blog</title>
<meta name="generator" content="Jekyll v3.5.2" />
<meta property="og:title" content="CentOS è‡ªåŠ¨å‘é‚®ä»¶" />
<meta name="author" content="æ¬§é˜³Boy_Petter" />
<meta property="og:locale" content="zh" />
<meta name="description" content="CentOS è‡ªåŠ¨å‘é‚®ä»¶æ“ä½œåˆ†äº«" />
<meta property="og:description" content="CentOS è‡ªåŠ¨å‘é‚®ä»¶æ“ä½œåˆ†äº«" />
<meta property="og:site_name" content="æ¬§é˜³Boy_Petter&#39;s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-09-17T00:00:00+00:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"æ¬§é˜³Boy_Petter"},"description":"CentOS è‡ªåŠ¨å‘é‚®ä»¶æ“ä½œåˆ†äº«","@type":"BlogPosting","url":"/blog/2017/09/17/CentOs-auto-mail/","headline":"CentOS è‡ªåŠ¨å‘é‚®ä»¶","dateModified":"2017-09-17T00:00:00+00:00","datePublished":"2017-09-17T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/2017/09/17/CentOs-auto-mail/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<meta name="keywords" content="CentOs,maillx,å®šæ—¶ä»»åŠ¡,é‚®ä»¶" />





<link type="application/atom+xml" rel="alternate" href="/feed.xml" title="æ¬§é˜³Boy_Petter's Blog" />
    <link href='/assets/stylesheets/blog.css' rel="stylesheet" type="text/css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
<script>window.Modernizr || document.write('<script src="/assets/javascripts/modernizr-2.8.3.min.js"><\/script>')</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="/assets/javascripts/jquery-3.2.1.min.js"><\/script>')
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
<script>
    window.Pace || document.write('<script src="/assets/javascripts/pace.min.js"><\/script>')
</script>


</head>

<body>
    <!--[if IE]>
    <p class="site-notice">æ‚¨æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªè¿‡æ—¶çš„ç½‘é¡µæµè§ˆå™¨ã€‚è¯·<a href="http://browsehappy.com/" target="_blank">å‡çº§æ‚¨çš„æµè§ˆå™¨</a>æˆ–<a href="http://www.google.com/chromeframe/?redirect=true" target="_blank">å¼€å¯ Google Chrome Frame</a> æ¥æé«˜ç”¨æˆ·ä½“éªŒã€‚</p>
<![endif]-->
<noscript>
    <p class="site-notice">æœ¬ç½‘ç«™éœ€è¦ JavaScriptã€‚è¯·æŸ¥é˜…æŒ‡å—æ¥<a href="http://www.enable-javascript.com/" target="_blank">ç»™æ‚¨çš„æµè§ˆå™¨å¼€å¯ JavaScript åŠŸèƒ½</a>ã€‚</p>
</noscript>

    <div class="nav-wrapper overlay-wrapper">
    <div class="nav-form overlay-form">
        <span class="overlay-header menu">èœå•</span>
        <a class="btn-close">å…³é—­</a>
        <div class="results">
            <ul>
                <li><a href="/blog/">æ–‡ç« </a></li>
                <li><a href="/blog/categories/">åˆ†ç±»</a></li>
                <li><a href="/blog/tags/">æ ‡ç­¾</a></li>

                <li><a href="/blog/reader/">è¯»ä¹¦</a></li>
                <li><a href="/blog/movie/">å½±éŸ³</a></li>
                <li><a href="/blog/book+movie/">ä¹¦&å½±</a></li>

                <li><a href="/blog/learner/">ç¬”è®°</a></li>
                <li><a href="/blog/life/">åŠ¨æ€</a></li>
                <li><a href="/blog/letter/">ä¿¡</a></li>
                <li><a href="/blog/song/">æ­Œ</a></li>
                <li><a href="/blog/story/">æ–‡</a></li>
                <li><a href="/blog/plan/">ä¸š</a></li>
                <li><a href="/blog/family/">å®¶</a></li>
                <li><a href="/blog/other/">æ‚</a></li>
                <li><a href="/">å…³äº</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="search-wrapper overlay-wrapper">
    <div class="search-form overlay-form">
        <input type="text" class="overlay-header search-field" placeholder="æœç´¢...">
        <a class="btn-close">å…³é—­</a>
        <ul class="results"></ul>
    </div>
</div>


    <div id="page" class="hentry">
        <header class="the-header">
    <div class="unit-head">
        <div class="unit-inner unit-head-inner">
            <nav class="nav-global">
                <ul>
                    <li class="logo">
                        <button class="btn-menu" title="èœå•"></button>
                        <a href="/blog/">æ¬§é˜³Boy_Petter's Blog</a>
                        <!--[if !IE]> -->
                        <button class="btn-search" title="æœç´¢"></button>
                        <!-- <![endif]-->
                    </li>
                    <li class="nav-link"><a label="article" title="æ–‡ç« " href="/blog/">æ–‡ç« </a></li>

                    <!-- <li class="nav-link"><a label="book" title="è¯»ä¹¦" href="/blog/reader/">è¯»ä¹¦</a></li> -->
                    <!-- <li class="nav-link"><a label="movie" title="å½±éŸ³" href="/blog/movie/">å½±éŸ³</a></li> -->
                    <li class="nav-link"><a label="book+movie" title="ä¹¦&å½±" href="/blog/book+movie/">ä¹¦&å½±</a></li>
                    
                    <li class="nav-link"><a label="learn" title="ç¬”è®°" href="/blog/learner/">ç¬”è®°</a></li>
                    <li class="nav-link"><a label="life" title="åŠ¨æ€" href="/blog/life/">åŠ¨æ€</a></li>
                    <li class="nav-link"><a label="letter" title="ä¿¡" href="/blog/letter/">ä¿¡</a></li>
                    <li class="nav-link"><a label="song" title="æ­Œ" href="/blog/song/">æ­Œ</a></li>
                    <li class="nav-link"><a label="story" title="æ–‡" href="/blog/story/">æ–‡</a></li>
                    <li class="nav-link"><a label="plan" title="ä¸š" href="/blog/plan/">ä¸š</a></li>
                    <li class="nav-link"><a label="family" title="å®¶" href="/blog/family/">å®¶</a></li>
                    <li class="nav-link"><a label="other" title="æ‚" href="/blog/other/">æ‚</a></li>
                    <!--[if !IE]> -->
                    <li class="nav-link"><a title="æœç´¢" class="btn-search" href="#">æœç´¢</a></li>
                    <!-- <![endif]-->
                </ul>
            </nav>
        </div>
    </div>
</header>


        <div class="body animated fadeInDown" role="main">
            <div class="unit-body">
                <div class="unit-inner unit-body-inner">
                    <div class="entry-content">
                        <article id="article-content" class="unit-article layout-post">
    <div class="unit-inner unit-article-inner">
        <div itemscope itemtype="http://schema.org/Article" class="content">
            <header>
                <div class="unit-head">
                    <div class="unit-inner unit-head-inner">
                        <h1 class="entry-title" itemprop="name">CentOS è‡ªåŠ¨å‘é‚®ä»¶</h1>
                    </div>
                </div>
            </header>
            <div class="bd article-content">
                <div class="entry-content">
                    <div class="meta">
                        <p class="date-publish">
                            å‘è¡¨ä¿¡æ¯:
                            <time itemprop="datePublished" class="date-pub updated"
                                title="2017-09-17T00:00:00+00:00" datetime="2017-09-17T00:00:00+00:00">September 17, 2017 </time>
                            by
                            <a class="author" href="/" rel="author" title="æ˜¾ç¤ºä½œè€…">
                                <span itemprop="author" itemscope itemtype="http://schema.org/Person">
                                    <span itemprop="name">æ¬§é˜³Boy_Petter</span>
                                </span>
                            </a>
                            
                                <a class="license-icon" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" title="æ˜¾ç¤ºè®¸å¯è¯">
                                    <img alt="Creative Commons Licence" style="border-width:0" src="/assets/images/theme/cc-by-sa.png"  height="16" width="80"/>
                                </a>
                            
                            
                        </p>
                        


<p style="margin-top: 0px;margin-bottom: 0px;">
  å­—æ•°ï¼š562 å­—ï¼Œ&nbsp;é¢„è®¡é˜…è¯»æ—¶é—´ï¼š5 åˆ†é’Ÿ
</p>
                        
                        <ul class="list-category list-linear">
                            <li class="list-head">åˆ†ç±»: </li>
                             
     
        <li>
            <a href="/blog/categories/#CentOs" title="CentOs">
            CentOs <span>2</span></a>
        </li>
     
        <li>
            <a href="/blog/categories/#é‚®ä»¶" title="é‚®ä»¶">
            é‚®ä»¶ <span>1</span></a>
        </li>
    



                        </ul>
                        
                        
                        <ul class="list-tag list-linear">
                            <li class="list-head">æ ‡ç­¾: </li>
                             
    
        
        <li>
            <a href="/blog/tags/#CentOs" title="CentOs">CentOs <span>2</span></a>
        </li>
    
        
        <li>
            <a href="/blog/tags/#maillx" title="maillx">maillx <span>1</span></a>
        </li>
    
        
        <li>
            <a href="/blog/tags/#å®šæ—¶ä»»åŠ¡" title="å®šæ—¶ä»»åŠ¡">å®šæ—¶ä»»åŠ¡ <span>1</span></a>
        </li>
    
        
        <li>
            <a href="/blog/tags/#é‚®ä»¶" title="é‚®ä»¶">é‚®ä»¶ <span>1</span></a>
        </li>
    




                        </ul>
                        
                    </div>
                    <div id="articleBody" itemprop="articleBody">
                        <h2 id="heading-åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h2>

<p>æˆ‘ä»¬ç»„æœ‰åå‡ ä¸ªäººï¼Œå®‰æ’äº†å€¼æ—¥å€’åƒåœ¾çš„è¡¨ï¼Œä½†æ˜¯æ€»æ˜¯æœ‰äººä¼šå¿˜è®°ï¼Œç„¶åäº§å“ç»ç†å°±å°†è¿™ä¸ªä¸œè¥¿ä¸ä¸ªäººç»©æ•ˆæŒ‚é’©ï¼Œå°‘ä¸€æ¬¡æ‰£ä¸€åˆ†ï¼Œè¿™é‡Œç”¨æˆ‘çš„æœåŠ¡å™¨æŠŠå€¼æ—¥è¡¨é‡Œå†…å®¹å¯¹åº”çš„äººæ¯å¤©å®šæ—¶ç»™ä»–å‘é‚®ä»¶æé†’ã€‚</p>

<h2 id="heading-é…ç½®-mail">é…ç½® mail</h2>

<h3 id="heading-æŸ¥çœ‹-mail-æ˜¯å¦å·²å®‰è£…">æŸ¥çœ‹ mail æ˜¯å¦å·²å®‰è£…</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>[root@host ~]# mail
-bash: mail: command not found
[root@host ~]# witch mail
-bash: witch: command not found
[root@host ~]# which mail
/usr/bin/which: no mail in (/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin)
</code></pre>
</div>

<h3 id="heading-ä¸å­˜åœ¨å®‰è£…">ä¸å­˜åœ¨ï¼Œå®‰è£…</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>[root@host ~]# yum install mail
</code></pre>
</div>

<h3 id="heading-é…ç½®-mail-1">é…ç½® mail</h3>

<ol>
  <li>
    <p>æŸ¥çœ‹ mail é…ç½®</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> [root@host ~]# mail
 No mail for root
 [root@host ~]# which mail
 /bin/mail
</code></pre>
    </div>
  </li>
  <li>
    <p>æ²¡æœ‰é…ç½®è´¦å·</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> [root@host etc]# vi mail.rc
 // æŠŠè¿™æ®µåŠ è¿›å»
 set from=è´¦å· 
 set smtp=é‚®ä»¶æœåŠ¡å™¨åœ°å€
 set smtp-auth-user=è´¦å· 
 set smtp-auth-password=å¯†ç  
 set smtp-auth=login
</code></pre>
    </div>
  </li>
</ol>

<p>æˆ‘ç”¨çš„æ˜¯ç½‘æ˜“é‚®ç®±ï¼Œå¯¹å¤–çš„æœåŠ¡å™¨åœ°å€æœ‰è¿™äº›</p>

<p><img src="https://cdn.jsdelivr.net/gh/petterobam/picture-bucket@main/blog/images/centos-auto-mail/mail-service-info.png" alt="ç½‘æ˜“é‚®ç®±æœåŠ¡å™¨ä¿¡æ¯" /></p>

<p>å¯¹äº†ï¼Œè¿™ä¸ªå¯†ç éœ€è¦é‚®ç®±çš„æˆæƒç ï¼Œä¸æ˜¯ç™»å½•å¯†ç ã€‚</p>

<p>=_= é†‰äº†ï¼Œæˆ‘çš„ç½‘æ˜“é‚®ç®±ä¸èƒ½å¼€å¯ stmp æœåŠ¡ï¼Œæ”¹ç”¨ qq é‚®ç®±ï¼Œstmp æœåŠ¡å™¨æ˜¯ smtp.qq.comã€‚</p>

<h2 id="heading-é…ç½®-sendmail">é…ç½® sendmail</h2>

<h3 id="heading-å®‰è£…-sendmail">å®‰è£… sendmail</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>yum install -y sendmail
</code></pre>
</div>

<h3 id="heading-é…ç½®-sendmail-1">é…ç½® sendmail</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>sendmail -bd â€“q12h
</code></pre>
</div>

<ul>
  <li>-bï¼šè®¾å®š Sendmail æœåŠ¡è¿è¡Œäºåå°ã€‚</li>
  <li>-dï¼šæŒ‡å®š Sendmail ä»¥ Daemonï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰æ–¹å¼è¿è¡Œã€‚</li>
  <li>-qï¼šè®¾å®šå½“ Sendmail æ— æ³•æˆåŠŸå‘é€é‚®ä»¶æ—¶ï¼Œå°±å°†é‚®ä»¶ä¿å­˜åœ¨é˜Ÿåˆ—é‡Œï¼Œå¹¶æŒ‡å®šä¿å­˜æ—¶é—´ã€‚ä¸Šé¢çš„ 12h è¡¨ç¤ºä¿ç•™ 12 å°æ—¶ã€‚</li>
</ul>

<p>æ­¤å¤–ï¼Œè¦æ£€æµ‹ Sendmail æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œï¼š</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/etc/rc.d/init.d/sendmail status
</code></pre>
</div>

<h3 id="heading-é…ç½®-senmail-çš„-smtp-è®¤è¯">é…ç½® Senmail çš„ SMTP è®¤è¯</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>vi /etc/mail/sendmail.mc
</code></pre>
</div>

<p>esc, æŸ¥æ‰¾<code class="highlighter-rouge">/TRUST_AUTH_MECH</code>ï¼Œå»æ‰è¿™ä¸¤è¡Œ</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dnl TRUST_AUTH_MECH(`EXTERNAL DIGEST-MD5 CRAM-MD5 LOGIN PLAIN')dnl
dnl define(`confAUTH_MECHANISMS', `EXTERNAL GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN PLAIN')dnl
</code></pre>
</div>

<h3 id="heading-ç½‘ç»œè®¿é—®æƒé™">ç½‘ç»œè®¿é—®æƒé™</h3>

<p>escï¼ŒæŸ¥æ‰¾<code class="highlighter-rouge">/DAEMON_OPTIONS</code>ï¼Œæ”¹ä¸ºä»»æ„ç½‘æ®µå¯è®¿é—®</p>

<div class="highlighter-rouge"><pre class="highlight"><code>DAEMON_OPTIONS(`Port=smtp,Addr=0.0.0.0, Name=MTA')dnl
</code></pre>
</div>

<h3 id="heading-ç”Ÿæˆé…ç½®æ–‡ä»¶">ç”Ÿæˆé…ç½®æ–‡ä»¶</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>[root#host ~]#m4 /etc/mail/sendmail.mc &gt; /etc/mail/sendmail.cf
m4:/etc/mail/sendmail.mc:10: cannot open `/usr/share/sendmail-cf/m4/cf.m4': No such file or directory
</code></pre>
</div>

<p>éœ€è¦å®‰è£… sendmail-cf</p>

<div class="highlighter-rouge"><pre class="highlight"><code>yum install sendmail-cf
</code></pre>
</div>

<h3 id="heading-é‡å¯-sendmail">é‡å¯ sendmail</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>/etc/init.d/sendmail restart
</code></pre>
</div>

<h2 id="heading-æµ‹è¯•é‚®ä»¶å‘é€">æµ‹è¯•é‚®ä»¶å‘é€</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>[root@host ~]# echo 'æ–‡æœ¬å†…å®¹ï¼' | mail -s "æ ‡é¢˜" 1460300366@qq.com
 	smtp-server: 530 Error: A secure connection is requiered(such as ssl).......
</code></pre>
</div>

<h3 id="heading-å¿½ç•¥-ssl-éªŒè¯">å¿½ç•¥ ssl éªŒè¯</h3>

<p>ä¿®æ”¹æ·»åŠ å‚æ•°</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vi /etc/mail.rc
// è¿½åŠ 
set smtp-use-starttls
set ssl-verify=ignore
set nss-config-dir=/etc/pki/nssdb/
</code></pre>
</div>

<p>å†è¯•</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[root@host ~]# echo 'æ–‡æœ¬å†…å®¹ï¼' | mail -s "æ ‡é¢˜" 1460300366@qq.com
Error in certificate: Peer's certificate issuer is not recognized.
</code></pre>
</div>

<h3 id="heading-éœ€è¦è¯ä¹¦">éœ€è¦è¯ä¹¦</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>mkdir -p /root/.certs/
echo -n | openssl s_client -connect smtp.qq.com:465 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' &gt; ~/.certs/qq.crt
certutil -A -n "GeoTrust SSL CA" -t "C,," -d ~/.certs -i ~/.certs/qq.crt
certutil -A -n "GeoTrust Global CA" -t "C,," -d ~/.certs -i ~/.certs/qq.crt
certutil -L -d /root/.certs
vi /etc/mail.rc
set nss-config-dir=/root/.certs
</code></pre>
</div>

<p>å†è¯•</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[root@host share]# echo 'æ–‡æœ¬å†…å®¹ï¼' | mail -s "æ ‡é¢˜" 1460300366@qq.com
Error in certificate: Peer's certificate issuer is not recognized.
</code></pre>
</div>

<p>è™½ç„¶<strong>è¯ä¹¦æŠ¥é”™</strong>æ²¡æœ‰éªŒè¯ï¼Œä½†æ˜¯æˆ‘æ”¶åˆ°äº†é‚®ä»¶ï¼Œç„¶åå°±æ˜¯å†…å®¹<strong>ä¸­æ–‡ä¹±ç </strong>ã€‚</p>

<p>è¯ä¹¦æŠ¥é”™å¯ä»¥è¿™æ ·è§£å†³</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cd /root/.certs
certutil -A -n "GeoTrust SSL CA - G3" -t "Pu,Pu,Pu"  -d ./ -i qq.crt 
</code></pre>
</div>

<p>ä¸­æ–‡ä¹±ç è¿™æ ·è§£å†³</p>

<div class="highlighter-rouge"><pre class="highlight"><code>1ï¼‰æŸ¥çœ‹æ”¯æŒçš„å­—ç¬¦é›†æ˜¯å¦æœ‰ GBK
[root@host ~]# locale -a
2) å®‰è£…è‹±æ–‡ç‰ˆé»˜è®¤çš„å­—ç¬¦é›†é…ç½®ä¸ºï¼š
[root@host ~]# cat /etc/sysconfig/i18n
LANG="en_US.UTF-8"
SYSFONT="latarcyrheb-sun16"
3) ä¿®æ”¹ä¸ºä¸­æ–‡å­—ç¬¦é›†ï¼š
[root@host ~]# vi /etc/sysconfig/i18n
LANG="zh_CN.GBK"
SUPPORTED="zh_CN.UTF-8:zh_CN:zh"
SYSFONT="latarcyrheb-sun16"
4) æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æˆ–è€…é‡å¯å³å¯ç”Ÿæ•ˆã€‚
[root@host ~]# source /etc/sysconfig/i18n
</code></pre>
</div>

<p><img src="https://cdn.jsdelivr.net/gh/petterobam/picture-bucket@main/blog/images/centos-auto-mail/success-mail-qq.png" alt="å‘é€æˆåŠŸï¼" /></p>

<h2 id="heading-è„šæœ¬å®šæ—¶å‘é€">è„šæœ¬å®šæ—¶å‘é€</h2>

<h3 id="heading-å‘é€é‚®ä»¶çš„è„šæœ¬">å‘é€é‚®ä»¶çš„è„šæœ¬</h3>

<p>æ–°å»ºä¸€ä¸ªè„šæœ¬</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[root@host ~]# touch /root/test.sh
[root@host ~]# chmod u+x /root/test.sh
[root@host ~]# vi /root/test.sh

#!/bin/csh
SENDDATE=`date`
echo "å®šæ—¶æµ‹è¯•ï¼Œæ¯å¤© 7 ç‚¹" | /bin/mail -s "é‚®ä»¶ä¸»é¢˜ - $SENDDATE" 1460300366@qq.com
</code></pre>
</div>

<h3 id="heading-æ·»åŠ å®šæ—¶ä»»åŠ¡">æ·»åŠ å®šæ—¶ä»»åŠ¡</h3>
<p>è®©è„šæœ¬å®šæ—¶è‡ªåŠ¨è¿è¡Œï¼Œè¿™ä¸ªä¾‹å­æ˜¯æ¯å¤© 7:00 å‘é€é‚®ä»¶</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[root@host ~]# echo "00 07 * * * root /root/test.sh" &gt;&gt; /etc/crontab
[root@host ~]# echo &gt;&gt; /etc/crontab
[root@host ~]# service crond reload
</code></pre>
</div>

<p>æ˜å¤©çœ‹ä¸‹æ•ˆæœï¼Œç„¶åå°±å†™å®é™…åº”ç”¨è„šæœ¬ã€‚</p>

<p>ç»æ£€æµ‹æ‰§è¡Œå‘½ä»¤å‰è¦åŠ ä¸ª shï¼Œæ‰èƒ½æ‰§è¡Œè„šæœ¬ï¼Œå› ä¸ºæˆ‘é‚£ä¸ªå¼€å¤´å†™é”™äº†<code class="highlighter-rouge">/bin/csh</code>ï¼Œåº”è¯¥æ˜¯<code class="highlighter-rouge">/bin/bash</code>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œä¸è¿‡ç”¨ sh æ‰§è¡Œå°±ä¸ç”¨ç®¡è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”ä¹Ÿä¸éœ€è¦ç¡®å®šæœ‰æ²¡æœ‰æˆæƒã€‚</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[root@host ~]# /root/test.sh 
-bash: /root/test.sh: /bin/csh: bad interpreter: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•
</code></pre>
</div>

<p>æˆ‘ç”¨æ¯åˆ†é’Ÿä¸€æ¬¡çš„æµ‹è¯•è¿˜æ˜¯ä¸è¡Œï¼Œå‘ç°å¯èƒ½æ˜¯æ²¡æœ‰è®¾ç½®ç”Ÿæ•ˆï¼Œé‡å¯ä¸€ä¸‹æœåŠ¡</p>

<div class="highlighter-rouge"><pre class="highlight"><code>*/1 * * * * root sh /root/test.sh
</code></pre>
</div>

<p>é‡å¯æœåŠ¡</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/etc/init.d/crond restart
</code></pre>
</div>

<p><img src="https://cdn.jsdelivr.net/gh/petterobam/picture-bucket@main/blog/images/centos-auto-mail/test-sendmail-auto.png" alt="æµ‹è¯•ç»“æœ" /></p>

                    </div>
                </div>
            </div>
            <footer class="unit-foot">
                <div class="unit-inner unit-foot-inner">
                    <div class="post-buttons">
                        <a class="internal gotop" href="#page" title="è¿”å›é¡¶éƒ¨">è¿”å›é¡¶éƒ¨</a>
                        
                    </div>
                    <nav class="pagination">
                        
                            <a class="internal" rel="prev" href="/blog/2017/09/10/Tale-blog-install/" title="ä¸Šä¸€ç¯‡ 'Tale åšå®¢éƒ¨ç½²'"> â† Tale åšå®¢éƒ¨ç½²</a>
                        
                        
                            <a class="internal" rel="next" href="/blog/2017/09/22/first-project-manage/" title="ä¸‹ä¸€ç¯‡ 'åˆä½“éªŒÂ·é¡¹ç›®ç®¡æ§å¿ƒå¾—'">åˆä½“éªŒÂ·é¡¹ç›®ç®¡æ§å¿ƒå¾— â†’ </a>
                        
                    </nav>
                </div>
            </footer>
        </div>
    </div>
</article>
<!-- è¯„è®ºç»„ä»¶ -->
<!-- èšåˆæ‰€æœ‰è¯„è®ºç»„ä»¶ -->

<div class="misc-content">

<!-- emaction -->

<div style="margin-top: 10px;color: coral;border-top: 1px solid;border-bottom: 1px solid;">
<div style="float:left;">é‚€è¯·æ ‡è®°ä½ çš„é˜…è¯»ä½“éªŒğŸ˜‰ ï½œ â†’ &nbsp;</div>
<emoji-reaction></emoji-reaction>
<div style="clear:both;"></div>
</div>
<script type="module" src="https://cdn.jsdelivr.net/gh/emaction/frontend.dist@1.0.7/bundle.js"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $($("emoji-reaction")[0].shadowRoot).find("div.container").css("align-items","center");
    });
</script>

<!-- gitment -->

<!-- utterances -->

<script src="https://utteranc.es/client.js"
    repo="petterobam/blog"
    
    issue-number="2"
    
    theme=""
    crossorigin="anonymous"
    async></script>


</div>
<!-- æ‚¬æµ®ç›®å½•ç»„ä»¶ -->


<style type="text/css">
.directory-content{font-size:15px;line-height:28px;position:relative;z-index:20;max-width:1000px;margin-right:auto!important;margin-left:auto!important;text-align:right}
.directory-content.initial{opacity:0}
.directory-content.pinned{opacity:1}
.directory-content.unpinned{opacity:1}
.directory-content.headroom--top{opacity:0}
.directory-content.headroom--not-top{-webkit-transition:opacity .5s ease-in-out;transition:opacity .5s ease-in-out;opacity:1}
#directory{position:fixed;z-index:20;top:37px;right:45px;display:inline-block;text-align:left;background-color:#edeff2;padding:10px 20px;border-radius:3px;filter: alpha(Opacity=90);-moz-opacity: 0.9;opacity: 0.9;}
#directory li,#directory ul{margin:0;padding-left:0;list-style:none}
#directory>ul{position:relative;border-left:1px solid #ddd}
#directory>ul>li::before{position:relative;top:0;left:-4px;display:inline-block;width:7px;height:7px;content:'';border-radius:50%;background-color:#eb5055}
#directory ul li a{display:inline-table;margin-left:5px;white-space:nowrap}
#directory ul li ul li a{margin-left:20px;white-space:nowrap;color:#5f5f5f}
#directory ul li ul li ul li a{margin-left:30px;color:#5f5f5f}
#directory a:hover{color:#eb5055}
@media (max-width: 768px) {
    #directory p,ul {
        display: none;
    }
}
@media (max-width: 480px) {
    #directory p,ul {
        display: none;
    }
}
</style>
<div id="directory-content" class="directory-content">
    <div id="directory"></div>
</div>
<script type="text/javascript">
    $('#directory').html('<a id="openHiddenLinkId" href="javascript:void(0)" isopen="0" style="display:block;float:right;z-index: 2000;">â†—</a><p style="margin: 0;text-align: center;padding-bottom: 5px;color: #08c;">ç›®å½•</p>');
    var postDirectoryBuild = function() {
        $("#openHiddenLinkId").click(function(){
            var isopen = $(this).attr("isopen");
            if(isopen == "1"){
              $('#directory').find("p,ul").show(200);
              $(this).attr("isopen","0").html("â†—");
            }else{
              $('#directory').find("p,ul").hide(200);
              $(this).attr("isopen","1").html("â†™");
            }
        });
        var postChildren = function children(childNodes, reg) {
                var result = [],
                    isReg = typeof reg === 'object',
                    isStr = typeof reg === 'string',
                    node, i, len;
                for (i = 0, len = childNodes.length; i < len; i++) {
                    node = childNodes[i];
                    if ((node.nodeType === 1 || node.nodeType === 9) &&
                        (!reg ||
                        isReg && reg.test(node.tagName.toLowerCase()) ||
                        isStr && node.tagName.toLowerCase() === reg)) {
                        result.push(node);
                    }
                }
                return result;
            },
            createPostDirectory = function(article, directory, isDirNum) {
                var contentArr = [],
                    titleId = [],
                    levelArr, root, level,
                    currentList, list, li, link, i, len;
                levelArr = (function(article, contentArr, titleId) {
                    var titleElem = postChildren(article.childNodes, /^h\d$/),
                        levelArr = [],
                        lastNum = 1,
                        lastRevNum = 1,
                        count = 0,
                        guid = 1,
                        id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                        lastRevNum, num, elem;
                    while (titleElem.length) {
                        elem = titleElem.shift();
                        contentArr.push(elem.innerHTML);
                        num = +elem.tagName.match(/\d/)[0];
                        if (num > lastNum) {
                            levelArr.push(1);
                            lastRevNum += 1;
                        } else if (num === lastRevNum ||
                            num > lastRevNum && num <= lastNum) {
                            levelArr.push(0);
                            lastRevNum = lastRevNum;
                        } else if (num < lastRevNum) {
                            levelArr.push(num - lastRevNum);
                            lastRevNum = num;
                        }
                        count += levelArr[levelArr.length - 1];
                        lastNum = num;
                        elem.id = elem.id || (id + guid++);
                        titleId.push(elem.id);
                    }
                    if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;

                    return levelArr;
                })(article, contentArr, titleId);
                currentList = root = document.createElement('ul');
                dirNum = [0];
                for (i = 0, len = levelArr.length; i < len; i++) {
                    level = levelArr[i];
                    if (level === 1) {
                        list = document.createElement('ul');
                        if (!currentList.lastElementChild) {
                            currentList.appendChild(document.createElement('li'));
                        }
                        currentList.lastElementChild.appendChild(list);
                        currentList = list;
                        dirNum.push(0);
                    } else if (level < 0) {
                        level *= 2;
                        while (level++) {
                            if (level % 2) dirNum.pop();
                            currentList = currentList.parentNode;
                        }
                    }
                    dirNum[dirNum.length - 1]++;
                    li = document.createElement('li');
                    link = document.createElement('a');
                    link.href = '#' + titleId[i];
                    link.innerHTML = !isDirNum ? contentArr[i] :
                        dirNum.join('.') + ' ' + contentArr[i] ;
                    li.appendChild(link);
                    currentList.appendChild(li);
                }
                directory.appendChild(root);
            };
        createPostDirectory(document.getElementById('articleBody'),document.getElementById('directory'), true);
    };
    postDirectoryBuild();
</script>




                    </div>
                </div>
            </div>
        </div>
        <footer class="the-footer">
    <div class="unit-foot">
        <div class="unit-inner unit-foot-inner">
            <div class="misc vcard">
                <div class="about">
                    <h4>
                        <a href="/blog/other/about/">å…³äº</a>
                        
                    </h4>
                </div>
                <div class="social-links">
                    
                        <a class="ico-gmail" href="mailto:1460300366@qq.com" rel="me" target="_blank" title="email"></a>
                    
                    <a class="ico-rss" href="/feed.xml" rel="me" target="_blank" title="feed"></a>
                    
                        
                    
                        
                            <a class="ico-github" href="https://github.com/petterobam" rel="me" target="_blank" title="github"></a>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                </div>
            </div>
        </div>
    </div>
    <a href="#" class="internal back-to-top">è¿”å›é¡¶éƒ¨</a>
</footer>


    </div>

    <script>
$(document).ready(function () {
    var offset = 50,
        duration = 500,
        width = 960;
    var dirOldTop = 37;
    $(window).scroll(function () {
    	var scrollTop = $(this).scrollTop();
        if (scrollTop > width) {
            if (scrollTop > offset) {
                $('footer').css('top', '20px');
                $('footer .back-to-top').fadeIn(duration);
            } else {
                $('footer').css('top', 'auto');
                $('footer .back-to-top').fadeOut(duration);
            }
        }
        var directory = $("#directory");
        if(null != directory && directory.length > 0){
        	var top;
        	if(scrollTop > dirOldTop){
        		top = (scrollTop - dirOldTop) + "px";
        	}else{
        		top = dirOldTop + "px";
        	}
        	directory.css("top",top);
        }
    });
    $(window).resize(function () {
        if ($(window).width() < width) {
            $('footer').css('top', 'auto');
            $('footer .back-to-top').fadeOut(duration);
        }
        if ($(window).width() >= width && $(this).scrollTop() > offset) {
            $('footer').css('top', '20px');
            $('footer .back-to-top').fadeIn(duration);
        }
    });

    $('footer .back-to-top, .gotop').on('click', function (event) {
        event.preventDefault();
        $('html, body').animate({
            scrollTop: 0
        }, duration);
        return false;
    });

    $('.show-hidden').on('click', function () {
        $(this).parent().next().toggleClass("hidden");
        $(this).toggleClass("hidden");
    });
});
</script>

<!-- Google Analytics Event tracking -->


<!-- Show menu overlay + Jekyll Simple Search option -->
<script src="/assets/javascripts/jekyll-search.jquery.js"></script>
<script>
$(document).ready(function () {
    $('.search-field').simpleJekyllSearch({
      jsonFile: '/search.json',
      template: '<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',
      searchResults: '.search-wrapper .results',
      searchResultsTitle: '<h4>æœç´¢ç»“æœ</h4>',
      noResults: '<p>å•Šå“ˆ<br/><small>ä»€ä¹ˆä¹Ÿæ²¡æ‰¾åˆ° :(</small></p>'
    });
});

(function ($, window, undefined) {
    var closeOverlay = function () {
        $('.nav-wrapper, .search-wrapper').removeAttr('style');
        $(".nav-form, .search-form").removeClass('active');
        $("body").removeClass('nav-overlay search-overlay');
    };

    $('.nav-global .btn-init-live2dgirl').on('click', function () {
        initLive2dGirl();
    });

    $('.nav-global .btn-search').on('click', function () {
        $('.search-wrapper').css({display: "block"});
        $(".search-form").addClass('active');
        $(".search-form").find('input').focus();
        $("body").addClass('search-overlay');
    });

    $('.nav-global .btn-menu').on('click', function () {
        $('.nav-wrapper').css({display: "block"});
        $(".nav-form").addClass('active');
        $(".nav-form .search-field").prop('disabled', true);
        $("body").addClass('nav-overlay');
    });

    $('.nav-wrapper .btn-close, .search-wrapper .btn-close').on('click', function () {
        closeOverlay();
    });

    $(document).on('keyup', function (e) {
        if (e.keyCode === 27) {
            closeOverlay();
        }
    });
})(jQuery, window);
</script>

<script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.min.js'></script>
<script src="/assets/javascripts/unveil/jquery.unveil.min.js"></script>

<script>
    window.jQuery.fancybox || document.write('<script src="/assets/javascripts/fancybox/jquery.fancybox.pack.js?v=2.1.4"><\/script>')
    window.jQuery.fancybox.helpers.buttons || document.write('<script src="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"><\/script>')
</script>

<script>
    $("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/jquery.fancybox.css?v=2.1.4" type="text/css" />');
    $("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />');
    $(".post-image").fancybox({
        prevEffect: 'none',
        nextEffect: 'none',
        closeBtn: true,
        helpers: {
            title: {
                type: 'float'
            }
        }
    });
    $(document).ready(function () {
        $(".post-image > img").unveil(450);
        $(".nav-global a[label='']").css("background-color", "orange")
    });
</script>

<!-- LaTeX è¯­æ³•æ”¯æŒ -->
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<!-- åŠ¨æ€éšè— post çš„ js -->
<style type="text/css">
  ul.post-list li.post2hide {
    display: none;
  }
</style>

<script text="text/javascript">
  $(document).ready(function() {
    // è·å–URLå‚æ•°
    const urlParams = new URLSearchParams(window.location.search);
    // æ£€æŸ¥æ˜¯å¦æœ‰actionå‚æ•°ï¼Œå¹¶ä¸”å…¶å€¼ä¸ºall
    if(urlParams.get('action') === 'all' || '' === 'all') {
      // æ‰¾åˆ°æ‰€æœ‰ä¸å¯è§çš„<li>å…ƒç´ å¹¶å°†å…¶æ˜¾ç¤ºå‡ºæ¥
      $('li.post2hide').show();
    }
  });
</script>
<!-- æŠ˜å  post åˆ—è¡¨ çš„ js -->


<!-- å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ -->
<div id="imgEnlargeDiv" style="display: none; text-align: center;position: fixed;z-index: 1000;top: 0;left: 0;
    width: 100%;height: 100%;background-color: rgba(255,255,255,.9);overflow: hidden;">
    <img id="bigimg-random-12312" style="height: auto;width: 90%;
    position: absolute;margin:auto;top:0;bottom:0;left: 0;right: 0;" title="å•å‡»å…³é—­å›¾å±‚" src="" />
</div>
<script type="text/javascript">
    // å›¾ç‰‡æ”¾å¤§  
    $(function () {
        $("#imgEnlargeDiv").click(function () {
            // å†æ¬¡ç‚¹å‡»æ·¡å‡ºæ¶ˆå¤±å¼¹å‡ºå±‚    
            $(this).fadeOut("fast");
        });
        imgEnlarge();
    });

    function imgShow(outerdiv, bigimg, _this) {
        var src = _this.attr("src");// è·å–å½“å‰ç‚¹å‡»çš„pimgå…ƒç´ ä¸­çš„srcå±æ€§    
        $(bigimg).attr("src", src);// è®¾ç½®#bigimgå…ƒç´ çš„srcå±æ€§    
        $(outerdiv).fadeIn("fast");  // å›¾ç‰‡æ”¾å¤§çš„divå¿«é€Ÿæ·¡å…¥æ˜¾ç¤ºå±‚
        var imgWidth = $(bigimg).width();
        var imgHeight = $(bigimg).height();
        if (imgHeight > imgWidth) {
            $(bigimg).css("height", "90%").css("width", "auto");
        } else {
            $(bigimg).css("height", "auto").css("width", "90%");
        }
    }

    var img2ShowExit = true;
    function imgEnlarge() {
        $(".entry-content img").mouseover(function () {
            $(this).css("cursor", "pointer");//é¼ æ ‡ç§»åŠ¨åˆ°å›¾ç‰‡ï¼Œé¼ æ ‡ç®­å¤´å˜ä¸ºæ‰‹åŠ¿
        });
        $(".entry-content img").click(function () {
            var _this = $(this);// å°†å½“å‰çš„pimgå…ƒç´ ä½œä¸º_thisä¼ å…¥å‡½æ•°    
            imgShow("#imgEnlargeDiv", "#bigimg-random-12312", _this);
        });
    }
</script>
<!-- gist å¼•ç”¨æŠ˜å  -->
<script type="text/javascript">
$(function () {
    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        // æ˜¯ç§»åŠ¨è®¾å¤‡
        $(".gist-file").click(function() {
            if ($(this).attr("pack-up") == "1") {
                $(this).find(".gist-data").css({
                    "overflow": "auto",
                    "height": "auto",
                    "border-bottom": "1px solid #ddd"
                });
                $(this).find(".gist-meta span").html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â†‘â†‘ å•å‡»æ”¶èµ· â†‘â†‘ &nbsp;&nbsp;&nbsp;');
                $(this).attr("pack-up", "0");
            } else {
                $(this).find(".gist-data").css({
                    "overflow": "hidden",
                    "height": "75px",
                    "border-bottom": "3px solid red"
                });
                $(this).find(".gist-meta span").html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â†‘â†‘ å•å‡»å±•å¼€ â†‘â†‘ &nbsp;&nbsp;&nbsp;');
                $(this).attr("pack-up", "1");
            }
        });
      } else {
        $(".gist-file").dblclick(function() {
            if ($(this).attr("pack-up") == "1") {
                $(this).find(".gist-data").css({
                    "overflow": "auto",
                    "height": "auto",
                    "border-bottom": "1px solid #ddd"
                });
                $(this).find(".gist-meta span").html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â†‘â†‘ åŒå‡»æ”¶èµ· â†‘â†‘ &nbsp;&nbsp;&nbsp;');
                $(this).attr("pack-up", "0");
            } else {
                $(this).find(".gist-data").css({
                    "overflow": "hidden",
                    "height": "75px",
                    "border-bottom": "3px solid red"
                });
                $(this).find(".gist-meta span").html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â†‘â†‘ åŒå‡»å±•å¼€ â†‘â†‘ &nbsp;&nbsp;&nbsp;');
                $(this).attr("pack-up", "1");
            }
        });
    }

    $(".gist-file").find(".gist-data").css({
        "overflow": "hidden",
        "height": "75px",
        "border-bottom": "3px solid red"
    });
    $(".gist-file").attr("pack-up", "1");
    $(".gist-file").find(".gist-data").css({"cursor":"pointer"});
    $(".gist-file").find(".gist-meta").append('<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; â†‘â†‘ åŒå‡»å±•å¼€ â†‘â†‘</span>');
});
</script>


<!-- live2dgirlåŠ è½½ -->

<link rel="stylesheet" type="text/css" href="/assets/javascripts/live2dgirl/waifu.css"/>
<!-- <script src="/assets/javascripts/live2dgirl/jquery.min.js"></script> -->
<div class="waifu">
    <div class="waifu-tips"></div>
    <canvas id="live2d" width="280" height="250" class="live2d"></canvas>
    <div class="waifu-tool">
        <span class="fui-home"></span>
        <span class="fui-chat"></span>
        <span class="fui-eye"></span>
        <span class="fui-user"></span>
        <span class="fui-photo"></span>
        <span class="fui-info-circle"></span>
        <span class="fui-cross"></span>
    </div>
</div>
<script sync src="/assets/javascripts/live2dgirl/waifu-tips.js"></script>
<script sync src="/assets/javascripts/live2dgirl/live2d.js"></script>
<script type="text/javascript">
function initLive2dGirl() {
    $(".waifu").css('display', 'block');
    initModel("/assets/javascripts/live2dgirl/");
}
</script>


</body>

</html>